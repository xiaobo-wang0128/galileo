webpackJsonp([1],{"4F3n":function(t,e){},"52/q":function(t,e){},"RPq/":function(t,e){},Yh7g:function(t,e,o){"use strict";var a=o("7+uW"),n={components:{},data:function(){return{loginUser:{}}},props:{},watch:{},created:function(){var t=this;a.default.prototype.$loginUser={},t.$ajax({url:"/i18n/i18n_server/LoginRpc/getLogin.json",success:function(e){e&&e.data&&(a.default.prototype.$loginUser=e.data,t.loginUser=e.data)}})},methods:{goToLogin:function(){window.location=this.$ex_default_login_url}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"background-color":"#393622",display:"flex","justify-content":"space-between"}},[o("div",{staticStyle:{display:"flex","align-items":"center","line-height":"46px",color:"#fff",padding:"0px 18px","font-size":"24px",cursor:"pointer"},on:{click:function(e){return t.$router.push("/")}}},[o("span",{staticStyle:{"font-size":"30px","margin-left":"10px",color:"#f5712f"}},[t._v("OKIOS")]),t._v(" "),o("span",{staticStyle:{"font-size":"22px","margin-left":"10px"}},[t._v("多语言国际化配置中心")])]),t._v(" "),o("div",{staticStyle:{"font-size":"14px",color:"#fff","line-height":"46px",padding:"0px 18px"}},[o("el-button",{staticStyle:{color:"#ccc"},attrs:{size:"medium",type:"text"},on:{click:function(e){return t.$router.push("/")}}},[t._v("词条管理")]),t._v(" "),o("el-button",{staticStyle:{"margin-right":"40px",color:"#ccc"},attrs:{size:"medium",type:"text"},on:{click:function(e){return t.$router.push("/util")}}},[t._v("翻译工具")]),t._v(" "),t.loginUser.userId?o("span",[t._v(t._s(t.loginUser.name))]):o("span",[t._v("\n          您还没有登陆，\n          "),o("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"text"},on:{click:t.goToLogin}},[t._v("前往登陆页")])],1)],1)])},staticRenderFns:[]};var l=o("VU/8")(n,i,!1,function(t){o("52/q")},null,null);e.a=l.exports},"gL/h":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("7+uW");var a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{staticClass:"windowForm",attrs:{title:t.operateType+"应用配置",visible:t.dialogVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.afterDialogClose}},[o("el-form",{attrs:{"label-width":"68px"}},[o("el-form-item",{attrs:{label:"语种选择"}},[o("ex-select-auto",{attrs:{data:t.$allLanOptions,optionKey:"value",optionLabel:"label",optionValue:"value",multiple:"",placeholder:"请选择语种"},model:{value:t.globalLocales,callback:function(e){t.globalLocales=e},expression:"globalLocales"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"应用管理"}},[o("ex-table-auto",{ref:"gridPanelEl",staticClass:"el-table-nowwarp",attrs:{data:t.appOptions,border:""}},[o("el-table-column",{attrs:{prop:"appCode",label:"应用code","min-width":"6"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.appCode,callback:function(o){t.$set(e.row,"appCode",o)},expression:"scope.row.appCode"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"appName",label:"应用名称","min-width":"6"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.appName,callback:function(o){t.$set(e.row,"appName",o)},expression:"scope.row.appName"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"appName",label:"资源文件类型","min-width":"6"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("ex-select-auto",{attrs:{data:t.exportTypeOptions,optionKey:"value",optionLabel:"label",optionValue:"value",placeholder:"请选择语种"},model:{value:e.row.exportType,callback:function(o){t.$set(e.row,"exportType",o)},expression:"scope.row.exportType"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"appName",label:"",width:"40px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{icon:"el-icon-close",type:"text"},on:{click:function(o){return t.appOptions.splice(e.$index,1)}}})]}}])})],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.appOptions.push({locales:[]})}}},[t._v("新增应用")]),t._v(" "),o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.saveButtonDisabled},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")({data:function(){return{globalLocales:[],appOptions:[],dialogVisible:!1,saveButtonDisabled:!1,operateType:"",formValue:{},searchValue:{},rules:{},exportTypeOptions:[{label:"前端js",value:"js"},{label:"java",value:"java"},{label:"android",value:"android"}]}},created:function(){var t=this;t.$ajax({url:"/i18n/i18n_server/AppRpc/selectAll.json",method:"post",data:t.formValue,success:function(e){e&&e.data&&e.data.rows&&(t.appOptions=e.data.rows,t.globalLocales=t.appOptions[0].locales)}})},watch:{globalLocales:function(t,e){this.appOptions.forEach(function(e){return e.locales=t})}},destroyed:function(){},methods:{showAppEditDialog:function(){this.dialogVisible=!0},submitForm:function(){var t=this;t.saveButtonDisabled=!0;var e=[];t.$allLanOptions.forEach(function(o){t.globalLocales.contains(o.value)&&e.push(o.value)}),t.appOptions.forEach(function(t){return t.locales=e}),t.$ajax({url:"/i18n/i18n_server/AppRpc/saveUpdate.json",method:"post",type:"json",data:t.appOptions,success:function(e){t.dialogVisible=!1,t.$message({showClose:!0,message:"提交成功",type:"success"}),t.$emit("afterSave")},afterAjax:function(){t.saveButtonDisabled=!1}})},afterDialogClose:function(){this.saveButtonDisabled=!1},handleClick:function(t,e){var o=this,a=this;"edit"==e?(a.operateType="修改",a.$ajax({url:"/i18n/i18n_server/AppRpc/detail.json",method:"post",data:{securityId:t.securityId},success:function(t){var e=t.data;a.formValue=e,a.dialogVisible=!0}})):"del"==e&&this.$confirm("确定删除该应用?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$ajax({url:"/i18n/i18n_server/AppRpc/remove.json",method:"post",data:{securityId:t.securityId},success:function(){a.$message({showClose:!0,message:"删除成功",type:"success"}),a.$refs.gridPanelEl.loadData()}})}).catch(function(){})}}},a,!1,function(t){o("iTke")},null,null).exports,i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{staticClass:"windowForm",attrs:{title:"词条"+(t.dictVO.dictId>0?"编辑":"新增"),visible:t.dialogVisible,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.afterDialogClose}},[o("el-form",{attrs:{"label-width":"68px"}},[o("el-form-item",{attrs:{label:"词条编码"}},[o("el-input",{model:{value:t.dictVO.dictKey,callback:function(e){t.$set(t.dictVO,"dictKey",e)},expression:"dictVO.dictKey"}})],1),t._v(" "),t._l(t.appInfo.locales,function(e){return o("el-form-item",{key:e,attrs:{label:t.$getLanCN(e)}},[o("el-input",{model:{value:t.dictVO.dictValues[e],callback:function(o){t.$set(t.dictVO.dictValues,e,o)},expression:"dictVO.dictValues[key]"}})],1)})],2),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.saveButtonDisabled},on:{click:t.submitForm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=o("VU/8")({data:function(){return{dictVO:{},appInfo:{},dialogVisible:!1,saveButtonDisabled:!1,operateType:"",formValue:{},searchValue:{},rules:{}}},created:function(){},watch:{globalLocales:function(t,e){this.appOptions.forEach(function(e){return e.locales=t})}},destroyed:function(){},methods:{showAppEditDialog:function(t,e){this.dialogVisible=!0,this.dictVO=t,this.appInfo=e},submitForm:function(){var t=this;t.saveButtonDisabled=!0,t.dictVO.appId=t.appInfo.id,t.dictVO.appCode=t.appInfo.appCode,t.$ajax({url:"/i18n/i18n_server/DictRpc/saveUpdate.json",method:"post",type:"json",data:t.dictVO,success:function(e){t.dialogVisible=!1,t.$message({showClose:!0,message:"提交成功",type:"success"}),t.$emit("afterSave")},afterAjax:function(){t.saveButtonDisabled=!1}})},afterDialogClose:function(){this.saveButtonDisabled=!1}}},i,!1,function(t){o("4F3n")},null,null).exports,s={data:function(){return{dictVO:{},appInfo:{},importUrl:"",dialogVisible:!1,saveButtonDisabled:!1,operateType:"",formValue:{},searchValue:{},rules:{}}},created:function(){},watch:{globalLocales:function(t,e){this.appOptions.forEach(function(e){return e.locales=t})}},destroyed:function(){},methods:{showEditDialog:function(t){this.appInfo=t,this.dialogVisible=!0},uploadSuccess:function(t){console.log(t);if(401==t.code)window.location=this.$ex_default_login_url;else if(0!=t.code)return void this.$message({type:"error",message:"导入失败: "+t.message});this.dialogVisible=!1,this.$message({type:"success",message:"批量导入成功"}),this.$emit("afterSave")},afterDialogClose:function(){this.saveButtonDisabled=!1}}},r={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{staticClass:"windowForm",attrs:{title:t.operateType+"词条批量导入",visible:t.dialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.afterDialogClose}},[o("a",{attrs:{href:"/i18n/i18n_server/DictRpc/downloadSample.json?appCode="+t.appInfo.appCode,target:"_blank"}},[o("el-button",{staticClass:"f14btn",staticStyle:{"margin-left":"60px"},attrs:{icon:"el-icon-download",type:"text"}},[t._v("下载应用模版")])],1),t._v(" "),o("el-upload",{staticStyle:{"padding-left":"60px"},attrs:{drag:!0,action:"/i18n/i18n_server/DictRpc/importExcel.json",multiple:!1,"on-success":t.uploadSuccess}},[o("i",{staticClass:"el-icon-upload"}),t._v(" "),o("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),o("em",[t._v("点击上传")])]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 excel/xlsx 文件")])]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(s,r,!1,function(t){o("xH1k")},null,null).exports,p={components:{HeaderCmp:o("Yh7g").a,AppEdit:n,DictForm:l,ImportButton:c},data:function(){return{appOptions:[],appMap:{},currentApp:{appCode:"_all_"},columnData:[],gridData:[],dialogVisible:!1,saveButtonDisabled:!1,operateType:"",formValue:{},searchForm:{appCode:"",keyword:""},rules:{}}},created:function(){this.loadAppInfos()},watch:{"searchForm.appCode":function(t,e){var o=this;this.currentApp=this.appMap[t];var a=[];o.currentApp.locales.forEach(function(t){a.push({prop:t,label:o.$getLanCN(t),width:"10"})}),o.columnData=a},currentApp:function(t,e){},gridData:function(t,e){}},destroyed:function(){},methods:{keyValueChange:function(t){console.log(t)},exportResource:function(){window.open("/i18n/i18n_server/I18nRpc/exportResource.json?appCode="+this.currentApp.appCode)},handleDownload:function(t,e){window.open("/i18n/i18n_server/DictRpc/download_dict.json?appCode=_all_&type="+t)},loadAppInfos:function(){var t=this;t.$ajax({url:"/i18n/i18n_server/AppRpc/selectAll.json",method:"post",data:t.formValue,success:function(e){e&&e.data&&e.data.rows&&(t.appOptions=e.data.rows,t.appOptions.splice(0,0,{appCode:"_all_",appName:"全部应用",locales:e.data.rows[0].locales}),t.appMap={},t.appOptions.forEach(function(e){t.appMap[e.appCode]=e}),t.searchForm.appCode||(t.searchForm.appCode=t.appOptions[0].appCode),t.searchForm.appCode&&(t.currentApp=t.appMap[t.searchForm.appCode]),t.loadDictKeys())}})},loadDictKeys:function(){this.$refs.gridPanelEl.loadData(this.searchForm)},submitForm:function(){var t=this;t.saveButtonDisabled=!0,t.$refs.formEl.validate(function(e){if(!e)return t.saveButtonDisabled=!1,!1;t.$ajax({url:"/apollo/app/DemandRpc/saveUpdate.json",method:"post",data:t.formValue,success:function(e){t.$refs.gridPanelEl.loadData(),t.dialogVisible=!1,t.$message({showClose:!0,message:"提交成功",type:"success"})},afterAjax:function(){t.saveButtonDisabled=!1}})})},afterDialogClose:function(){this.saveButtonDisabled=!1},handleClick:function(t,e){var o=this,a=this;"edit"==e?(a.operateType="修改",a.$ajax({url:"/apollo/app/DemandRpc/detail.json",method:"post",data:{securityId:t.securityId},success:function(t){var e=t.data;a.formValue=e,a.dialogVisible=!0}})):"del"==e&&this.$confirm("确定删除该i18n?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$ajax({url:"/apollo/app/DemandRpc/del.json",method:"post",data:{securityId:t.securityId},success:function(){a.$message({showClose:!0,message:"删除成功",type:"success"}),a.$refs.gridPanelEl.loadData()}})}).catch(function(){})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-content"},[o("header-cmp"),t._v(" "),o("div",{staticStyle:{padding:"0px 10px"}},[o("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[o("div",[o("el-form",{staticStyle:{padding:"18px 0px 2px 14px"},attrs:{inline:!0,model:t.searchForm,"label-suffix":""}},[o("el-form-item",{attrs:{label:"应用"}},[o("ex-select-auto",{attrs:{data:t.appOptions,optionKey:"appCode",optionLabel:"appName",optionValue:"appCode",placeholder:"请选择应用"},model:{value:t.searchForm.appCode,callback:function(e){t.$set(t.searchForm,"appCode",e)},expression:"searchForm.appCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"语种"}},[t._v("\n              "+t._s(t.$getLanCN(t.currentApp.locales))+"    \n            ")]),t._v(" "),o("el-form-item",{attrs:{label:"关键字"}},[o("el-input",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"请输入关键字",clearable:""},model:{value:t.searchForm.keyword,callback:function(e){t.$set(t.searchForm,"keyword",e)},expression:"searchForm.keyword"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(e){return t.loadDictKeys()}}},[t._v("查询\n              ")]),t._v(" "),o("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){return t.$refs.dictForm.showAppEditDialog({dictValues:{}},t.currentApp)}}},[t._v("新增词条")])],1)],1)],1),t._v(" "),o("div",[o("el-form",{staticStyle:{padding:"18px 14px 2px 0px"},attrs:{"label-suffix":""}},[o("el-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-upload2"},on:{click:function(e){return t.$refs.importButton.showEditDialog(t.currentApp)}}},[t._v("导入excel")]),t._v(" "),o("el-dropdown",{staticStyle:{"margin-left":"8px"},on:{command:t.handleDownload}},[o("el-button",{attrs:{icon:"el-icon-download"}},[t._v("\n                导出 excel"),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{staticStyle:{"line-height":"36px"},attrs:{command:"all"}},[t._v("导出全部字条")]),t._v(" "),o("el-dropdown-item",{staticStyle:{"line-height":"36px"},attrs:{command:"un_finish"}},[t._v("导出未完成字条")])],1)],1),t._v(" "),o("el-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-download",disabled:"_all_"==t.searchForm.appCode},on:{click:function(e){return t.exportResource()}}},[t._v("导出资源文件")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"el-icon-setting"},on:{click:function(e){return t.$refs.appEdit.showAppEditDialog()}}},[t._v("应用配置")])],1)],1)]),t._v(" "),o("ex-table-auto",{ref:"gridPanelEl",staticClass:"el-table-nowwarp",attrs:{url:"/i18n/i18n_server/DictRpc/query.json?appCode="+t.currentApp.appCode,autoFill:!0,autoPage:!0,autoLoad:!1,defaultPageSize:50,border:""}},[o("el-table-column",{attrs:{type:"index",label:"#",width:"43"}}),t._v(" "),o("el-table-column",{attrs:{label:"应用",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.appMap[e.row.appCode].appName)+"\n          ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"dictKey",label:"词条编码","min-width":"12"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.dictKey)+"\n          ")]}}])}),t._v(" "),t._l(t.columnData,function(e,a){return o("el-table-column",{key:a,attrs:{label:e.label,"min-width":"10"},scopedSlots:t._u([{key:"default",fn:function(o){return[t._v("\n            "+t._s(o.row.dictValues?o.row.dictValues[e.prop]:"")+"\n          ")]}}],null,!0)})}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"f14btn",attrs:{type:"text"},on:{click:function(o){t.$refs.dictForm.showAppEditDialog(JSON.parse(JSON.stringify(e.row)),t.currentApp)}}},[t._v("编辑")]),t._v(" "),o("ex-button-delete",{staticClass:"f14btn",attrs:{deleteUrl:"/i18n/i18n_server/DictRpc/remove.json",rowId:e.row.dictId+""},on:{afterOperationDone:function(e){return t.loadDictKeys()}}},[t._v("删除\n            ")])]}}])})],2)],1),t._v(" "),o("app-edit",{ref:"appEdit",on:{afterSave:function(e){return t.loadAppInfos()}}}),t._v(" "),o("dict-form",{ref:"dictForm",on:{afterSave:function(e){return t.loadDictKeys()}}}),t._v(" "),o("import-button",{ref:"importButton",on:{afterSave:function(e){return t.loadDictKeys()}}})],1)},staticRenderFns:[]};var d=o("VU/8")(p,u,!1,function(t){o("RPq/")},null,null);e.default=d.exports},iTke:function(t,e){},xH1k:function(t,e){}});
webpackJsonp([4],{NXyU:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var a=t("mvHQ"),l=t.n(a),n={data:function(){return{dialogVisible:!1,saveButtonDisabled:!1,formValue:{},rules:{},autoConfigForm:[],autoConfigValue:{},split_w:"_____"}},watch:{autoConfigValue:function(e,o){}},created:function(){},mounted:function(){var e=this;e.$ajax({url:$portal_context+"/autoconfig/AutoConfigWebApiRpc/getAllConfigForms.json",data:{},success:function(o){var t=o.data;if(t.form&&0!==t.form.length){var a={};for(var n in t.value){var i=n.split(".").join(e.split_w);a[i]={};var c=JSON.parse(l()(t.value[n]));for(var u in c)a[i][u]=c[u]}e.autoConfigValue=a;for(var r=0;r<t.form.length;r++){var s=t.form[r].className.split(".").join(e.split_w);t.form[r].formKey=s,e.autoConfigForm.push(t.form[r])}}}})},destroyed:function(){},methods:{splitArray:function(e,o){for(var t=[],a=0;a<e.length;a+=o){for(var l=[],n=0;n<o&&!(a+n>=e.length);n++){var i=e[a+n];l.push(i),"combined"===i.type?(i.colspan=o,t.push(l),l=[]):(i.colspan=1,a+n+1<e.length&&"combined"===e[a+n+1].type&&(t.push(l),l=[]))}l.length>0&&t.push(l)}return t},submitForm:function(){var e=this;this.$confirm("此操作将影响业务逻辑，请谨慎操作，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.saveButtonDisabled=!0;var o={};for(var t in e.autoConfigValue){o["autoconfig_"+t.split(e.split_w).join(".")]=l()(e.autoConfigValue[t])}e.$ajax({url:$portal_context+"/autoconfig/AutoConfigWebApiRpc/updateConfigValue.json",method:"post",data:o,success:function(o){e.$message({showClose:!0,message:"提交成功",type:"success"})},afterAjax:function(){}})}).catch(function(){})}}},i={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"page-content",staticStyle:{"padding-top":"0px"}},[t("el-form",{ref:"formEl",staticClass:"float_form_panel_div",staticStyle:{"padding-top":"0px"},attrs:{"label-position":"top","label-width":"240px"}},[e._l(e.autoConfigForm,function(o,a){return[t("div",{staticStyle:{"font-size":"16px",position:"sticky",top:"0px","z-index":"2",height:"30px","line-height":"30px","border-bottom":"1px dashed #dcdfe6","font-weight":"bold",padding:"10px 10px 10px 20px","background-color":"#fff"}},[t("i"),e._v(e._s(o.group)+"\n      ")]),e._v(" "),e._l(e.splitArray(o.fields,1),function(l,n){return t("el-row",{key:"key_"+a+"_"+n},[e._l(l,function(l,i){return""==l.vif||e.autoConfigValue[o.formKey][l.vif]?[t("el-col",{key:"key_"+a+"_"+n+"_"+i,attrs:{span:3}},[t("el-form-item",[t("template",{slot:"label"},[e._v("\n                "+e._s("boolean"!==l.type?l.name:"")+"\n                "),"combined"===l.type&&l.desc&&l.desc.length>0?t("el-popover",{attrs:{placement:"top",width:"240",trigger:"hover"}},[e._v("\n                  "+e._s(l.desc)+"\n                  "),e._v(" "),t("el-button",{staticClass:"el-icon-question",attrs:{slot:"reference",type:"text"},slot:"reference"})],1):e._e()],1),e._v(" "),"select"===l.type?t("ex-select-auto",{staticStyle:{width:"300px"},attrs:{data:l.options,optionKey:"value",optionLabel:"label",optionValue:"value",placeholder:"请选择工作模式",multiple:l.multiple},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}}):e._e(),e._v(" "),"text"===l.type?t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容"},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}}):e._e(),e._v(" "),"textarea"===l.type?t("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}}):e._e(),e._v(" "),"number"===l.type?[l.slider?t("el-slider",{staticStyle:{width:"300px"},attrs:{min:l.min,max:l.max,step:1,"show-stops":""},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}}):t("el-input-number",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入内容",min:l.min,max:l.max,step:1,precision:l.precision},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}})]:e._e(),e._v(" "),"boolean"===l.type?t("el-switch",{attrs:{"active-text":l.name},model:{value:e.autoConfigValue[o.formKey][l.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey],l.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code]"}}):e._e(),e._v(" "),l.desc&&"combined"!==l.type?["boolean"===l.type?t("span",[t("br"),e._v(" "),t("span",{staticStyle:{color:"#999","padding-left":"50px"}},[t("i",{staticClass:"el-icon-info"}),e._v(" "+e._s(l.desc)+"  ")])]):t("font",{staticStyle:{color:"#999","margin-left":"10px"}},[t("i",{staticClass:"el-icon-info"}),e._v(" "+e._s(l.desc)+"\n                ")])]:e._e(),e._v(" "),"combined"===l.type?[l.multiple?e._l(e.autoConfigValue[o.formKey][l.code],function(a,n){return t("div",{staticClass:"sys-config-combined-div"},[e._l(JSON.parse(l.combinedFields),function(a,i){return[t("label",{staticClass:"combined-field-label"},[e._v(e._s(a.name))]),e._v(" "),"text"===a.type?t("el-input",{staticStyle:{flex:"1"},attrs:{readonly:a.readonly},model:{value:e.autoConfigValue[o.formKey][l.code][n][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code][n],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cfvRowIndex][cf.code]"}}):e._e(),e._v(" "),"select"===a.type?t("ex-select-auto",{staticStyle:{flex:"1"},attrs:{data:a.options,optionKey:"value",optionLabel:"label",optionValue:"value",placeholder:"请选择工作模式",multiple:a.multiple},model:{value:e.autoConfigValue[o.formKey][l.code][n][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code][n],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cfvRowIndex][cf.code]"}}):e._e(),e._v(" "),"number"===a.type?t("el-input-number",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入内容",min:a.min,max:a.max,setp:1},model:{value:e.autoConfigValue[o.formKey][l.code][n][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code][n],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cfvRowIndex][cf.code]"}}):e._e()]}),e._v(" "),t("div",{staticStyle:{width:"80px","text-align":"center"}},[0==n?t("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.autoConfigValue[o.formKey][l.code].push({})}}},[e._v("添加")]):t("el-button",{attrs:{icon:"el-icon-close",type:"text"},on:{click:function(t){e.autoConfigValue[o.formKey][l.code].splice(n,1)}}},[e._v("删除")])],1)],2)}):t("div",{staticClass:"sys-config-combined-div"},[e._l(JSON.parse(l.combinedFields),function(a,n){return[t("label",{staticClass:"combined-field-label"},[e._v(e._s(a.name))]),e._v(" "),"text"===a.type?t("el-input",{staticStyle:{flex:"1"},attrs:{readonly:a.readonly},model:{value:e.autoConfigValue[o.formKey][l.code][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cf.code]"}}):e._e(),e._v(" "),"select"===a.type?t("ex-select-auto",{staticStyle:{flex:"1"},attrs:{data:a.options,optionKey:"value",optionLabel:"label",optionValue:"value",placeholder:"请选择工作模式",multiple:a.multiple},model:{value:e.autoConfigValue[o.formKey][l.code][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cf.code]"}}):e._e(),e._v(" "),"number"===a.type?t("el-input-number",{staticStyle:{flex:"1"},attrs:{placeholder:"请输入内容",min:a.min,max:a.max,setp:1},model:{value:e.autoConfigValue[o.formKey][l.code][a.code],callback:function(t){e.$set(e.autoConfigValue[o.formKey][l.code],a.code,t)},expression:"autoConfigValue[formGroup.formKey][field.code][cf.code]"}}):e._e()]})],2)]:e._e()],2)],1)]:e._e()})],2)})]}),e._v(" "),t("div",{staticStyle:{height:"40px"}}),e._v(" "),t("div",{staticClass:"float_form_panel_btn",staticStyle:{"padding-left":"20px"}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.submitForm()}}},[e._v("确 认 提 交")])],1)],2)],1)},staticRenderFns:[]};var c=t("VU/8")(n,i,!1,function(e){t("rwJX")},null,null);o.default=c.exports},rwJX:function(e,o){}});
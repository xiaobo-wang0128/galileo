webpackJsonp([5],{YybM:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("mvHQ"),a=o.n(n),i={data:function(){return{dialogVisible:!1,saveButtonDisabled:!1,formValue:[],rules:{},configForm:[],actionConfigs:[],autoConfigValue:{},actionClassDesc:{},split_w:"_____"}},watch:{formValue:function(t,e){var o=this,n=this.configForm;this.actionConfigs=[];for(var a=function(t){var e=n[t].flowConfigs.filter(function(e){return e.xmlPath===n[t].flowDefineXmlPath})[0].actionOptions;e.length>1&&(e=e.filter(function(t){return t.implOptions.length>1}),o.actionConfigs.push(e))},i=0;i<n.length;i++)a(i)}},created:function(){},mounted:function(){var t=this;t.$ajax({url:$portal_context+"/nova_flow/NovaFlowRpc/getConfig.json",data:{},success:function(e){e.data;var o=e.data.rows;t.formValue=o.map(function(e){var o=e.flowConfigs.filter(function(t){return t.xmlPath===e.flowDefineXmlPath}).map(function(e){return e.actionOptions.filter(function(t){return t.implOptions.length>1}).map(function(e){return e.implOptions.forEach(function(e){e.desc&&(t.actionClassDesc[e.className]=e.desc)}),{actionCode:e.actionCode,actionName:e.actionName,activeClass:e.activeClass,actionOptions:e.implOptions}})});return{flowDefineCode:e.flowDefineCode,flowDefineXmlPath:e.flowDefineXmlPath,actionActiveClass:o[0]}}),t.configForm=e.data.rows}})},destroyed:function(){},methods:{splitArray:function(t,e){for(var o=[],n=0;n<t.length;n+=e){for(var a=[],i=0;i<e&&!(n+i>=t.length);i++){var l=t[n+i];a.push(l),"combined"===l.type?(l.colspan=e,o.push(a),a=[]):(l.colspan=1,n+i+1<t.length&&"combined"===t[n+i+1].type&&(o.push(a),a=[]))}a.length>0&&o.push(a)}return o},submitForm:function(){var t=this;this.$confirm("此操作将影响业务流程，请谨慎操作，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.saveButtonDisabled=!0;var e=JSON.parse(a()(t.formValue));e.forEach(function(t){t.actionActiveClass.forEach(function(t){delete t.actionOptions})}),t.$ajax({url:$portal_context+"/nova_flow/NovaFlowRpc/swithConfig.json",method:"post",type:"json",data:e,success:function(e){t.$message({showClose:!0,message:"提交成功",type:"success"})},afterAjax:function(){}})}).catch(function(){})}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-content",staticStyle:{"padding-top":"0px"}},[o("el-form",{ref:"formEl",staticClass:"float_form_panel_div",staticStyle:{"padding-top":"0px"},attrs:{"label-width":"140px"}},[t._l(t.configForm,function(e,n){return[o("div",{staticStyle:{"font-size":"16px",position:"sticky",top:"0px","z-index":"2",height:"30px","line-height":"30px","border-bottom":"1px dashed #dcdfe6","font-weight":"bold",padding:"10px 10px 10px 20px","margin-bottom":"20px","background-color":"#fff"}},[o("i"),t._v(t._s(e.flowDefineName)+"\n      ")]),t._v(" "),o("el-row",[o("el-col",{attrs:{span:3}},[o("el-form-item",[o("font",{staticStyle:{"font-weight":"bold",color:"#409EFF"},attrs:{slot:"label"},slot:"label"},[t._v("\n              当前生效流程\n            ")]),t._v(" "),o("ex-select-auto",{staticStyle:{width:"300px"},attrs:{data:e.flowConfigs,optionKey:"xmlPath",optionLabel:"name",optionValue:"xmlPath",placeholder:"请选择流程"},model:{value:t.formValue[n].flowDefineXmlPath,callback:function(e){t.$set(t.formValue[n],"flowDefineXmlPath",e)},expression:"formValue[index].flowDefineXmlPath"}})],1)],1)],1),t._v(" "),t._l(t.formValue[n].actionActiveClass,function(e,n){return o("el-row",{key:n},[o("el-col",{attrs:{span:3}},[o("el-form-item",{attrs:{label:e.actionName}},[o("ex-select-auto",{staticStyle:{width:"300px"},attrs:{data:e.actionOptions,optionKey:"className",optionLabel:"implName",optionValue:"className",placeholder:"请选择实现"},model:{value:e.activeClass,callback:function(o){t.$set(e,"activeClass",o)},expression:"actionConfig.activeClass"}}),t._v(" "),t.actionClassDesc[e.activeClass]?[o("span",{staticStyle:{color:"#999","padding-left":"8px"}},[o("i",{staticClass:"el-icon-info"}),t._v(" \n                "+t._s(t.actionClassDesc[e.activeClass])+"  ")])]:t._e()],2)],1)],1)})]}),t._v(" "),o("div",{staticStyle:{height:"40px"}}),t._v(" "),o("div",{staticClass:"float_form_panel_btn",staticStyle:{"padding-left":"140px"}},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm()}}},[t._v("确 认 提 交")])],1)],2)],1)},staticRenderFns:[]};var s=o("VU/8")(i,l,!1,function(t){o("afsI")},null,null);e.default=s.exports},afsI:function(t,e){}});